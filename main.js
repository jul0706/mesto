(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{r:()=>X});var e={formSelector:".form-popup",inputSelector:".form-popup__input",submitButtonSelector:".form-popup__button-save",inactiveButtonClass:"form-popup__button-save_disabled",inputErrorClass:"form-popup__input_type_error",errorClass:"form-popup__error_visible"},r=document.querySelector(".profile__edit-button"),n=document.querySelector(".form-popup_type_profile"),o=document.querySelector(".add-button"),i=n.querySelector(".form-popup__input_type_name"),u=n.querySelector(".form-popup__input_type_job"),c=document.querySelector(".places"),a=document.querySelector(".profile__avatar-button");function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===l(o)?o:String(o)),n)}var o}var f=function(){function t(e,r,n,o,i,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._url=e.link,this._id=e._id,this._likes=e.likes,this._ownerId=e.owner._id,this._template=r,this._handleCardClick=n,this._deletePopup=o,this._userId=i,this._api=u}var e,r;return e=t,r=[{key:"_makeTemplateElement",value:function(){return c.querySelector(this._template).content.querySelector(".place").cloneNode(!0)}},{key:"_makeCardElement",value:function(){var t=this,e=this._makeTemplateElement();return this._ownerId!==this._userId&&e.querySelector(".place__delete-icon").remove(),this._cardImageElement=e.querySelector(".place__image"),this._placeTitleElement=e.querySelector(".place__title"),this._likeArea=e.querySelector(".place__like-area"),this._likeButton=e.querySelector(".place__like-button"),this._likes.length&&(this._likeAmount=document.createElement("p"),this._likeAmount.classList.add("place__like-amount"),this._likeArea.append(this._likeAmount),this._likeAmount.textContent=this._likes.length,this._likes.some((function(e){return e._id===t._userId}))&&(this._likeButton.classList.add("place__like-button_active"),this._isUserLiked=!0)),this._placeTitleElement.textContent=this._name,this._cardImageElement.src=this._url,this._cardImageElement.alt=this._name,e}},{key:"_listenLikedButton",value:function(){var t=this;this._isUserLiked?this._api.likeCard(this._id,"cards","DELETE").then((function(){t._isUserLiked=!1,t._likes.length--,0===t._likes.length?(t._likeAmount.remove(),t._likeButton.classList.remove("place__like-button_active")):(t._likeAmount.textContent=t._likes.length,t._likeButton.classList.remove("place__like-button_active"))})).catch((function(t){return X(t)})):this._api.likeCard(this._id,"cards","PUT").then((function(){t._isUserLiked=!0,t._likeButton.classList.add("place__like-button_active"),t._likes.length?(t._likes.length++,t._likeAmount.textContent=t._likes.length):(t._likes.length++,t._likeAmount=document.createElement("p"),t._likeAmount.classList.add("place__like-amount"),t._likeArea.append(t._likeAmount),t._likeAmount.textContent=t._likes.length)})).catch((function(t){return X(t)}))}},{key:"_listenDeleteButton",value:function(t){var e=this;t.addEventListener("click",(function(){e._deletePopup.getIdCard(e._id,e.cardElement),e._deletePopup.open()}))}},{key:"getNewCard",value:function(){var t=this;this.cardElement=this._makeCardElement(),this.cardElement.querySelector(".place__like-button").addEventListener("click",(function(){t._listenLikedButton()}));var e=this.cardElement.querySelector(".place__delete-icon");return e&&this._listenDeleteButton(e),this._cardImageElement.addEventListener("click",(function(){t._handleCardClick(t._name,t._url)})),this.cardElement}}],r&&s(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function m(t,e,r){return e&&y(t.prototype,e),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e,r){return(e=b(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===p(e)?e:String(e)}var _=m((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"_showInputError",(function(t,e,r){e.classList.add(n._inputErrorClass),n.formError=t.querySelector(".".concat(e.id,"-error")),n.formError.textContent=r,n.formError.classList.add(n._errorClass)})),h(this,"_hideInputError",(function(t,e){e.classList.remove(n._inputErrorClass),n.formError=t.querySelector(".".concat(e.id,"-error")),n.formError.classList.remove(n._errorClass),n.formError.textContent=""})),h(this,"_isValid",(function(t,e){e.validity.valid?n._hideInputError(t,e):n._showInputError(t,e,e.validationMessage)})),h(this,"_toggleButtonState",(function(t){t.checkValidity()?(n._buttonSubmit.disabled=!1,n._buttonSubmit.classList.remove(n._inactiveButtonClass)):(n._buttonSubmit.disabled=!0,n._buttonSubmit.classList.add(n._inactiveButtonClass))})),h(this,"_setInputListener",(function(t){n._toggleButtonState(t),Array.from(t.querySelectorAll(n._inputSelector)).forEach((function(e){e.addEventListener("input",(function(){n._isValid(t,e),n._toggleButtonState(t)}))}))})),h(this,"_setSubmitListener",(function(t){t.addEventListener("submit",(function(){n.form.classList.contains("form-popup_type_delete")||n._toggleButtonState(t)}))})),h(this,"enableValidation",(function(t){n._setInputListener(t),n._setSubmitListener(t)})),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this.form=r,this._buttonSubmit=r.querySelector(this._submitButtonSelector)}));function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===v(o)?o:String(o)),n)}var o}var k=function(){function t(e,r){var n=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=n,this._container=document.querySelector(r)}var e,r;return e=t,(r=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"addItems",value:function(t){this._container.append(t)}},{key:"renderItems",value:function(t){var e=this;this._items=t,this._items.forEach((function(t){return e._renderer(t)}))}}])&&d(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===S(o)?o:String(o)),n)}var o}var E=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(".".concat(e)),this.open=this.open.bind(this),this.close=this.close.bind(this),this._checkPressOverlay=this._checkPressOverlay.bind(this),this._checkPressEsc=this._checkPressEsc.bind(this)}var e,r;return e=t,(r=[{key:"open",value:function(){this._popup.classList.add("popup_is-opened"),this._handleEscClose()}},{key:"_checkPressEsc",value:function(t){"Escape"===t.key&&this.close()}},{key:"_checkPressOverlay",value:function(t){t.target===t.currentTarget&&this.close()}},{key:"_handleEscClose",value:function(){window.addEventListener("keydown",this._checkPressEsc)}},{key:"close",value:function(){window.removeEventListener("keydown",this._checkPressEsc),this._popup.classList.remove("popup_is-opened")}},{key:"setEventListeners",value:function(){this._closeButton=this._popup.querySelector(".close-icon"),this._closeButton.addEventListener("click",this.close),this._popup.addEventListener("click",this._checkPressOverlay)}}])&&g(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===w(o)?o:String(o)),n)}var o}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},O.apply(this,arguments)}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(n);if(o){var r=L(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return C(t)}(this,t)});function u(t){var e,r=t.popupSelector,n=t.submitCallback;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,r))._submitCallback=n,e._form=e._popup.querySelector(".form-popup"),e._getInputValues=e._getInputValues.bind(C(e)),e._inputsArray=Array.from(e._form.querySelectorAll(".form-popup__input")),e._submitButton=e._form.querySelector(".form-popup__button-save"),e}return e=u,(r=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputsArray.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"close",value:function(){O(L(u.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var t=this;O(L(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._submitCallback(t._getInputValues(),t._submitButton)}))}}])&&P(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(E);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==T(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===T(o)?o:String(o)),n)}var o}var R=function(){function t(e){var r=e.nameElement,n=e.jobElement,o=e.avatarElement;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userNameElement=document.querySelector(r),this._userJobElement=document.querySelector(n),this._userAvatarElement=document.querySelector(o),this.getUserInfo=this.getUserInfo.bind(this)}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return this.userFromPage={name:this._userNameElement.textContent,about:this._userJobElement.textContent},this.userFromPage}},{key:"editUserInfo",value:function(t){this._userNameElement.textContent=t.name,this._userJobElement.textContent=t.about}},{key:"editAvatar",value:function(t){this._userAvatarElement.src=t.avatar}},{key:"setUserInfo",value:function(t){this.editUserInfo(t),this.editAvatar(t),this.userId=t._id}}])&&q(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==B(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===B(o)?o:String(o)),n)}var o}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=V(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},x.apply(this,arguments)}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=V(n);if(o){var r=V(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return U(t)}(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"place-popup")).open=t.open.bind(U(t)),t._fewImage=t._popup.querySelector(".image-figure__image"),t._fewCaption=t._popup.querySelector(".image-figure__caption"),t}return e=u,(r=[{key:"open",value:function(t,e){this._fewImage.src=t,this._fewImage.alt=e,this._fewCaption.textContent=e,x(V(u.prototype),"open",this).call(this)}}])&&A(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(E);function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==z(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===z(o)?o:String(o)),n)}var o}var F=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e,this._token=r}var e,r;return e=t,(r=[{key:"_checkResolve",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getDataServer",value:function(t){var e=this;return fetch("".concat(this._url).concat(t),{method:"GET",headers:{authorization:this._token}}).then((function(t){return e._checkResolve(t)}))}},{key:"editUserInfo",value:function(t,e){var r=this;return fetch("".concat(this._url).concat(e),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t.name,about:t.about})}).then((function(t){return r._checkResolve(t)}))}},{key:"addCard",value:function(t,e){var r=this;return fetch("".concat(this._url).concat(e),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return r._checkResolve(t)}))}},{key:"deleteCard",value:function(t,e){var r=this;return fetch("".concat(this._url).concat(e,"/").concat(t),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return r._checkResolve(t)}))}},{key:"likeCard",value:function(t,e,r){var n=this;return fetch("".concat(this._url).concat(e,"/").concat(t,"/likes"),{method:r,headers:{authorization:this._token}}).then((function(t){return n._checkResolve(t)}))}},{key:"changeAvatar",value:function(t,e){var r=this;return fetch("".concat(this._url).concat(e),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:t.avatar})}).then((function(t){return r._checkResolve(t)}))}}])&&J(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==H(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===H(o)?o:String(o)),n)}var o}function M(){return M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Q(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},M.apply(this,arguments)}function K(t,e){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},K(t,e)}function Q(t){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Q(t)}function W(t,e){return new f(t,e,(function(t,e){$.open(e,t)}),Z,tt.userId,et).getNewCard()}function X(t){alert(t)}function Y(t,e,r){e.textContent=t?"Сохранение":r}var Z=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Q(n);if(o){var r=Q(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,t))._submitCallback=e,r._form=r._popup.querySelector(".form-popup"),r._submitButton=r._popup.querySelector(".form-popup__button-save"),r}return e=u,(r=[{key:"getIdCard",value:function(t,e){this._idDeletedCard=t,this._deletedCard=e}},{key:"setEventListeners",value:function(){var t=this;M(Q(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._submitCallback(t._idDeletedCard,t._deletedCard)}))}}])&&G(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(E))("delete-popup",(function(t,e){et.deleteCard(t,"cards").then((function(){e.remove(),e=null,Z.close()})).catch((function(t){return X(t)}))}));Z.setEventListeners();var $=new N;$.setEventListeners();var tt=new R({nameElement:".profile__title",jobElement:".profile__subtitle",avatarElement:".profile__avatar"}),et=new F("https://mesto.nomoreparties.co/v1/cohort-62/","ad81bbad-9a90-4f3d-8a69-b0152768bbd9"),rt=new k({renderer:function(t){var e=W(t,"#place__template");rt.addItems(e)}},".places");Promise.all([et.getDataServer("users/me"),et.getDataServer("cards")]).then((function(t){tt.setUserInfo(t[0]),rt.renderItems(t[1])})).catch((function(t){return X(t)}));var nt=new I({popupSelector:"profile-popup",submitCallback:function(t,e){var r=e.textContent;Y(!0,e,r),et.editUserInfo(t,"users/me").then((function(t){tt.editUserInfo(t),nt.close()})).catch((function(t){return X(t)})).finally((function(){Y(!1,e,r)}))}});nt.setEventListeners(),r.addEventListener("click",(function(){nt.open();var t=tt.getUserInfo();i.value=t.name,u.value=t.about}));var ot=new I({popupSelector:"add-button-popup",submitCallback:function(t,e){var r=e.textContent;Y(!0,e,r),et.addCard(t,"cards").then((function(t){var e=W(t,"#place__template");rt.addItem(e),ot.close()})).catch((function(t){return X(t)})).finally((function(){Y(!1,e,r)}))}});ot.setEventListeners(),o.addEventListener("click",(function(){ot.open()}));var it=new I({popupSelector:"edit-avatar-popup",submitCallback:function(t,e){var r=e.textContent;Y(!0,e,r),et.changeAvatar(t,"users/me/avatar").then((function(t){tt.editAvatar(t),it.close()})).catch((function(t){return X(t)})).finally((function(){Y(!1,e,r)}))}});it.setEventListeners(),a.addEventListener("click",(function(){it.open()})),Array.from(document.querySelectorAll(".form-popup")).forEach((function(t){new _(e,t).enableValidation(t)}))})();